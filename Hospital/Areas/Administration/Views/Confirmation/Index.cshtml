@using Hospital.Areas.Administration.Models
@model ConfirmationModel
@{
    ViewBag.Title = "Index";
}
@Styles.Render("~/Content/SideLinks.css")
@Styles.Render("~/Content/Confirmation.css")


    <div class="main-block">
        <div class="doc-pat-lists">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="lists">
                <section class="doctors">
                    @{
                    if (Model.Doctors.Count() > 0)
                    {
                        using (Html.BeginForm())
                        {
                            @Html.AntiForgeryToken()
                            <section class="create-refuse-doctors">
                                @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })*@
                                @*@Html.HiddenFor(m => m.Doctors)*@
                                @Html.ListBoxFor(model => model.SelectedDoctorId, Model.Doctors, new { @id = "docs", size = 10 })
                                @*@Html.ValidationMessageFor(x => x.SelectedDoctorId, "", new { @class = "text-danger" })*@
                                
                                    <div class="submit-button">
                                        <input type="submit" value="Confirm" formaction="~/Administration/Confirmation/ConfirmDoctor" formmethod="post" name="action:ConfirmDoctor" class="btn btn-default" />
                                        <input type="submit" value="Refuse" formaction="~/Administration/Confirmation/RefuseDoctor" formmethod="post" name="action:RefuseDoctor" class="btn btn-default" />
                                    </div>
                                
                            </section>
                    }
                }
                    }
                </section>
                <section class="patients">
                    @{
                    if (Model.Patients.Count() > 0)
                    {
                        using (Html.BeginForm())
                        {
                            @Html.AntiForgeryToken()
                            <section class="create-refuse-patients">

                                @*@Html.HiddenFor(m => m.Doctors)*@
                                @Html.ListBoxFor(model => model.SelectedPatientId, Model.Patients, new { @id = "patients", size = 10 })
                                @*@Html.ValidationMessageFor(x => x.SelectedPatientId, "", new { @class = "text-danger" })*@

                                <div class="submit-button">
                                    <input type="submit" value="Confirm" formaction="~/Administration/Confirmation/ConfirmPatient" formmethod="post" name="action:ConfirmPatient" class="btn btn-default" />
                                    <input type="submit" value="Refuse" formaction="~/Administration/Confirmation/RefusePatient" formmethod="post" name="action:RefusePatient" class="btn btn-default" />
                                </div>
                            </section>
                    }
                }
                    }
                </section>
            </div>

            <div class="personal-info">
                <div id="dinfo" class="selected-doctor-info"> </div>
                <div id="pinfo" class="selected-patient-info"> </div>
            </div>
        </div>
        <div class="links">
            @Html.ActionLink("Back to control panel", "Index", new { area = "Administration", controller = "ControlPanel" })
        </div>
    </div>





@*<div id="dinfo" class="selected-doctor-info"> </div>
    <div id="pinfo" class="selected-patient-info"> </div>*@
@section Scripts {
    <script type="text/javascript">
            $(function () {
                $("select[id='docs']").removeAttr('multiple');
            });

            $(document).ready(function () {
                $("#docs").change(function (evt) {
                    $.post("@Url.Action("ShowDoctorInfo", "Confirmation",new { @area = "Administration" })", { doctorId: ($("#docs").val()) }, function (data) {
                        $("#dinfo").empty();
                        $("#dinfo").append(data);
                        //alert($("#docs").val());
                        //alert($("#docs option:selected").text());
                    });
                });
            });
    </script>
    <script type="text/javascript">
            $(function () {
                $("select[id='patients']").removeAttr('multiple');
            });

            $(document).ready(function () {
                $("#patients").change(function (evt) {
                    $.post("@Url.Action("ShowPatientInfo", "Confirmation",new { @area = "Administration" })", { patientId: ($("#patients").val()) }, function (data) {
                        $("#pinfo").empty();
                        $("#pinfo").append(data);
                        //alert($("#docs").val());
                        //alert($("#docs option:selected").text());
                    });
                });
            });
    </script>
}




